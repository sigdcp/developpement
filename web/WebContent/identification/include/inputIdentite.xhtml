<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<body>
	<ui:composition>

		<ui:param name="columnCount" value="#{columnCount==null?3:columnCount}" />
		
		<style>
			.c1{
				font-weight: bold;
				width: 200px;
			}
			.c2{
				width: 200px;
			}
			.c3{
				
			}
		</style>	

	    <p:panelGrid id="panelIdentite" columns="#{editable?columnCount:2}" styleClass="panelGridNoBorder" columnClasses="c1,c2,c3,c1,c2,c3"> 
	    	
	    	<p:outputLabel for="questionAgent" value="Etes vous un agent de l'état ?" rendered="#{questionAgentEtat}"/>
			<p:selectOneRadio id="questionAgent" value="#{personneDto.agentEtat}" required="true"  requiredMessage="#{valueRequiredMessage}" rendered="#{questionAgentEtat}">
				<f:selectItem itemValue="true" itemLabel="Oui"/>
				<f:selectItem itemValue="false" itemLabel="Non"/>
				<p:ajax event="click" update="@parent" />
			</p:selectOneRadio>
			<p:message for="questionAgent" rendered="#{questionAgentEtat}"/>
						
			<p:outputLabel for="typePersonne" value="Type d'agent " rendered="#{personneDto.agentEtat}"/>
			<p:selectOneMenu id="typePersonne" value="#{personneDto.personne.type}" required="true" requiredMessage="#{valueRequiredMessage}" 
				converter="#{objectConverter}" rendered="#{personneDto.agentEtat}">
				<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
				<f:selectItems value="#{typePersonnes}" var="typePersonne" itemLabel="#{typePersonne.libelle}" />
			</p:selectOneMenu>
			<p:message for="typePersonne" rendered="#{personneDto.agentEtat}"/>
			
			<p:outputLabel for="matricule" value="Matricule" rendered="#{personneDto.agentEtat}" />
			<p:inputMask id="matricule" value="#{personneDto.personne.matricule}" required="true" requiredMessage="#{valueRequiredMessage}" rendered="#{personneDto.agentEtat}" 
				mask="#{webConstantResources.inputMatriculePattern}"/>
			<!--
			<p:inputText id="matricule" value="#{personneDto.personne.matricule}" required="true" requiredMessage="#{valueRequiredMessage}" 
				rendered="#{personneDto.agentEtat}"/>
			-->
			<p:message for="matricule" rendered="#{personneDto.agentEtat}"/>
			
			<p:outputLabel for="nom#{iid}" value="Nom" />
		 	<p:inputText id="nom#{iid}" required="true" value="#{personneDto.personne.nom}" requiredMessage="#{valueRequiredMessage}" />
		 	<p:message for="nom#{iid}"/>
			
			<p:outputLabel for="prenoms#{iid}" value="Prenoms" />
			<p:inputText id="prenoms#{iid}" value="#{personneDto.personne.prenoms}" required="true" requiredMessage="#{valueRequiredMessage}"/>
			<p:message for="prenoms#{iid}"/>
			
			<p:outputLabel for="datenaissance#{iid}" value="Date Naissance" />
			<p:calendar id="datenaissance#{iid}" required="true" navigator="true" value="#{personneDto.personne.dateNaissance}" requiredMessage="#{valueRequiredMessage}" 
				mindate="#{constantResources.dateMaximum}" maxdate="#{constantResources.dateNaissanceMinimum}" pattern="#{constantResources. datePattern}" readonlyInput="true"/>
			<p:message for="datenaissance#{iid}"/>
			
			<p:outputLabel for="sexe#{iid}" value="Sexe" rendered="#{sexe==null or sexe}"/>
			<p:selectOneRadio id="sexe#{iid}" value="#{personneDto.personne.sexe}" required="true" requiredMessage="#{valueRequiredMessage}" rendered="#{sexe==null or sexe}">
				<f:selectItems value="#{sexes}"/>
			</p:selectOneRadio>
			<p:message for="sexe#{iid}" rendered="#{sexe==null or sexe}"/> 

			<p:outputLabel for="profession#{iid}" value="Profession" rendered="#{profession==null or profession}"/>
			<p:selectOneMenu id="profession#{iid}" value="#{personneDto.personne.profession}" required="true" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{profession==null or profession}">
				<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
				<f:selectItems value="#{professions}" />
			</p:selectOneMenu>
			<p:message for="profession#{iid}" rendered="#{profession==null or profession}"/> 
			
			<p:outputLabel for="nationalite#{iid}" value="Nationalité" rendered="#{nationalite==null or nationalite}"/>
			<p:selectOneMenu id="nationalite#{iid}" value="#{personneDto.personne.nationalite}" required="true" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{nationalite==null or nationalite}">
				<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
				<f:selectItems value="#{pays}" />
			</p:selectOneMenu>
			<p:message for="profession#{iid}" rendered="#{profession==null or profession}"/>
			
			<p:outputLabel for="natpid#{iid}" value="Nature de la pièce d'identitité" rendered="#{pieceIdentite}"/>
			<p:selectOneMenu id="natpid#{iid}" value="#{personneDto.tp}"  required="true" requiredMessage="#{valueRequiredMessage}" 
				rendered="#{pieceIdentite}">
				<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
				<f:selectItem itemLabel="Carte nationale d'identité" itemValue="1"/>
				<f:selectItem itemLabel="Attestation d'identitté" itemValue="2"/>
				<f:selectItem itemLabel="Passport" itemValue="3"/>
				<!--
				<f:selectItems value="#{typePieceIdentites}" />
				-->
			</p:selectOneMenu>
			<p:message for="natpid#{iid}" rendered="#{pieceIdentite}"/> 
			
			<p:outputLabel for="numpid#{iid}" value="Numéro de la pièce d'identité" rendered="#{pieceIdentite}"/>
			<p:inputText id="numpid#{iid}" value="#{personneDto.personne.pieceIdentite.numero}" required="true" requiredMessage="#{valueRequiredMessage}" rendered="#{pieceIdentite}"/>
			<p:message for="numpid#{iid}" rendered="#{pieceIdentite}"/>
			
			<p:outputLabel for="adresse" value="Adresse postale: " /> 
			<p:inputText id="adresse" value="#{personneDto.personne.contact.boitePostale}" required="true" requiredMessage="#{valueRequiredMessage}"/>

			<p:message for="adresse"/> 
			
			<p:outputLabel for="telephone" value="Téléphone" />
			<p:inputMask id="telephone" value="#{personneDto.personne.contact.telephone}" required="true" requiredMessage="#{valueRequiredMessage}" mask="#{webConstantResources.inputPhoneNumberPattern}"/>		 
			<p:message for="telephone"/> 
			
			<p:outputLabel for="email" value="Email" />
			<p:inputText id="email" value="#{personneDto.personne.contact.email}" required="true" requiredMessage="#{valueRequiredMessage}"/>
			<p:message for="email"/> 			
			
		</p:panelGrid> 
			
	</ui:composition>
</body>
</html>
