<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>

	<ui:composition template="/template/commun.xhtml">

		<ui:define name="contenu">
			<ui:decorate template="/template/formTemplate.xhtml">
				<ui:param name="uiController" value="#{enregistrerDemandeMHCIFormController}" />
				<ui:define name="contenu">
					<p:commandButton immediate="true" action="#{enregistrerDemandeMHCIFormController.modifier}" value="Modifier" icon="ui-icon-pencil" ajax="false"/>
					<p:separator/>	
					<ui:include src="/dossier/include/formMHCI.xhtml" />
					<p:spacer height="5"/>
					
					<p:dataTable id="participant" var="inscription" rowIndexVar="index"  >
						<f:facet name="header"><h:outputText value="Participants" /> </f:facet>
						<p:column headerText="N°" >
							<h:outputText value="#{index+1}" />
							<f:facet name="footer"><p:commandButton id="modalDialogButton" value="Ajouter" onclick="PF('participantsDialog').show();" type="button"/></f:facet>
						</p:column>
						<p:column headerText="Matricule" ><h:outputText value="" /></p:column>
						<p:column headerText="Nom et prénoms" ><h:outputText value="" /></p:column>
						<p:column headerText="Fonction" ><h:outputText value="" /></p:column>
						<p:column headerText="Service" ><h:outputText value="" /></p:column>
						<p:column >
							<p:commandButton value="Détails" oncomplete="PF('detailsDialog').show();" update=":form:display"/>
						</p:column>
					</p:dataTable>	
					
					<!--
					<ui:include src="/dossier/include/inputPiecesJustificatives.xhtml">
						<ui:param name="controller" value="#{enregistrerDemandeMHCIFormController}"/>
						<ui:param name="uploader" value="#{enregistrerDemandeMHCIFormController.pieceJustificativeUploader}"/>
						<ui:param name="editable" value="#{enregistrerDemandeMHCIFormController.editable}"/>
					</ui:include>
					-->
					<p:dialog id="modalDialog" header="Ajout d'un participant" widgetVar="participantsDialog" modal="true" appendTo="@(Body)">  
						<h:form  id="dialogue" enctype="multipart/form-data">
							
							<p:panelGrid columns="3" styleClass="panelGridNoBorder" columnClasses="panelColumnVAlignTop,panelColumnVAlignTop">
								<p:outputLabel  for="matricule" value="Matricule " />
								<p:inputText id="matricule" value="" required="true" requiredMessage="#{valueRequiredMessage}" />
						        <p:message for="matricule" />
						        
						        <p:outputLabel  for="nom" value="Nom " />
								<p:inputText id="nom" value="" required="true" requiredMessage="#{valueRequiredMessage}" />
						        <p:message for="nom" />
						        
						        <p:outputLabel  for="prenom" value="Prenom " />
								<p:inputText id="prenom" value="" required="true" requiredMessage="#{valueRequiredMessage}" />
						        <p:message for="prenom" />
						        
						        <p:outputLabel  for="categorie" value="Catégorie " />
								<p:inputText id="categorie" value="" required="true" requiredMessage="#{valueRequiredMessage}" />
						        <p:message for="categorie" />
							</p:panelGrid>
							
							<ui:include src="/dossier/include/inputPiecesJustificatives.xhtml">	
								<ui:param name="uploader" value="#{enregistrerDemandeMHCIFormController.pieceJustificativeUploader}" />	
							</ui:include>	
						
							<p:commandButton value="Enregistrer" icon="ui-icon-check" action="#{enregistrerDemandeMHCIFormController.submit}" ajax="false" update="@form"/>
						</h:form>  
					</p:dialog>  
					
				</ui:define>
				<ui:define name="actions">
					<p:commandButton immediate="true" action="#{enregistrerDemandeMHCIFormController.cancel}" value="Annuler" icon="ui-icon-close" ajax="false"/>
					<p:commandButton value="Enregistrer"  icon="ui-icon-check" action="#{enregistrerDemandeMHCIFormController.submit}" ajax="false" update="@form" /> 	
					<p:commandButton value="Soumettre"  icon="ui-icon-check" action="#{enregistrerDemandeMHCIFormController.soumettre}" ajax="false" update="@form" /> 	
				</ui:define>				
			</ui:decorate>			
		</ui:define>


	</ui:composition>

</h:body>

</html>