<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<body>
	<ui:composition>
		
		<ui:param name="editable" value="#{enregistrerDemandeMHCIFormController.editable}" />
		<ui:param name="required" value="#{enregistrerDemandeMHCIFormController.requiredEnabled}" />

	<style>
		
		.designation .ui-inputfield{
			width: 90% !important;
		}
		
		
	</style>
		
		<p:fieldset legend="Mission">
			<!--
			<p:panelGrid columns="#{editable?6:4}" styleClass="panelGridNoBorder" columnClasses="c11">
				
				<p:outputLabel for="typeDepense" value="Est ce une prise en charge ou un remboursement ?" />
				<p:selectOneRadio id="typeDepense" value="#{enregistrerDemandeMHCIFormController.entity.deplacement.typeDepense}"  required="#{required}" requiredMessage="#{valueRequiredMessage}" rendered="#{editable}">
					<f:selectItems value="#{typeDepenes}"/>
				</p:selectOneRadio>
				<h:outputText value="" rendered="#{not editable}" />
				<p:message for="typeDepense" rendered="#{editable}"/> 
				
				<h:outputText value="" /><h:outputText value="" /><h:outputText value="" rendered="#{editable}"/>
			</p:panelGrid>
			-->
			<p:panelGrid columns="2" styleClass="panelGridNoBorder" columnClasses="c1,designation" style="width:100%;">
				<h:outputText value="" /><p:message for="designation" rendered="#{editable}"/>
				
				<p:outputLabel  for="designation" value="Désignation" />
				<p:inputText id="designation" value="#{enregistrerDemandeMHCIFormController.entity.designation}" required="#{required}" requiredMessage="#{valueRequiredMessage}" 
					rendered="#{editable}" cols="50" rows="5" size="100" styleClass="designation">
					<f:validateBean validationGroups="#{clientValidationGroupClass}" />
				</p:inputText>
		        
		        <!--
		        <h:outputText value="#{enregistrerDemandeMHCIFormController.entity.designation}" rendered="#{not editable}" />
				<p:outputLabel value="" /><p:outputLabel value="" /><p:outputLabel value="" rendered="#{editable}"/>	
				-->		
			</p:panelGrid>
			
			<p:panelGrid columns="#{editable?6:4}" styleClass="panelGridNoBorder" columnClasses="#{editable?'c1,c2,c3,c1,c2,c3':'c1,c2,c1,c2'}">								

				<p:outputLabel for="dateDepart" value="Date de début" />
				<p:calendar id="dateDepart" value="#{enregistrerDemandeMHCIFormController.entity.deplacement.dateDepart}" required="#{required}" pattern="#{constantResources.datePattern}" requiredMessage="#{valueRequiredMessage}" 
					rendered="#{editable}">
					<f:validateBean validationGroups="#{clientValidationGroupClass}" />
				</p:calendar>
				<h:outputText value="#{enregistrerDemandeMHCIFormController.entity.deplacement.dateDepart}" rendered="#{not editable}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message for="dateDepart" rendered="#{editable}"/>
				 
				<p:outputLabel for="dateArrivee" value="Date de fin" />
				<p:calendar id="dateArrivee" value="#{enregistrerDemandeMHCIFormController.entity.deplacement.dateArrivee}" required="#{required}" pattern="#{constantResources.datePattern}" requiredMessage="#{valueRequiredMessage}" rendered="#{editable}">
					<f:validateBean validationGroups="#{clientValidationGroupClass}" />
				</p:calendar>
				<h:outputText value="#{enregistrerDemandeMHCIFormController.entity.deplacement.dateArrivee}" rendered="#{not editable}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message for="dateArrivee" rendered="#{editable}"/>
		       
		       	<!--
				<h:outputText value="Durée de la mission (en jour)" /><h:outputText value="" /><h:outputText value="" />
				-->
			
				<p:outputLabel for="villeDepart"  value="Ville de départ:" />
				<p:selectOneMenu id="villeDepart" value="#{enregistrerDemandeMHCIFormController.entity.deplacement.localiteDepart}" required="#{required}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{editable}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{villes}"/>
					<f:validateBean validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>
				<h:outputText value="#{enregistrerDemandeMHCIFormController.entity.deplacement.localiteDepart}" rendered="#{not editable}"/>
				<p:message for="villeDepart" rendered="#{editable}"/>
				
				<p:outputLabel for="villeArrivee" value="Ville de la mission:" />		
				<p:selectOneMenu id="villeArrivee" value="#{enregistrerDemandeMHCIFormController.entity.deplacement.localiteArrivee}" required="#{required}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{editable}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{villes}"/>
					<f:validateBean validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>	
				<h:outputText value="#{enregistrerDemandeMHCIFormController.entity.deplacement.localiteArrivee}" rendered="#{not editable}"/>
				<p:message for="villeArrivee" rendered="#{editable}"/>
				
				<p:outputLabel for="responsable" value="Responsable" />		
				<p:selectOneMenu id="responsable" value="#{enregistrerDemandeMHCIFormController.entity.dossierDuResponsable}" required="#{required}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{editable}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{enregistrerDemandeMHCIFormController.dossierMissionDtos}" var="dossierDto" itemValue="#{dossierDto.dossierMission}" itemLabel="#{dossierDto.libelle}"/>
					<f:validateBean validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>	
				<h:outputText value="#{enregistrerDemandeMHCIFormController.entity.dossierDuResponsable.beneficiaire.nomPrenoms}" rendered="#{not editable}"/>
				<p:message for="responsable" rendered="#{editable}"/>
			         
			</p:panelGrid>
			
			 <!--
			<ui:include src="/dossier/include/inputPiecesJustificatives.xhtml">
				<ui:param name="uploader" value="#{enregistrerDemandeMHCIFormController.pieceJustificativeUploader}"/>
				<ui:param name="iid" value="commun" />
			</ui:include>
			-->
		</p:fieldset>	
		<p:spacer height="5"/>
		<p:fieldset legend="Participant">
			<p:panelGrid columns="4" id="pg" styleClass="panelGridNoBorder">
				<p:outputLabel for="matricule" value="Matricule" />
				<p:inputText id="matricule" value="#{enregistrerDemandeMHCIFormController.matricule}" required="false" requiredMessage="#{valueRequiredMessage}" size="10"/>
				<p:message for="matricule"/>
				<p:commandButton value="Ajouter" action="#{enregistrerDemandeMHCIFormController.ajouterParticipant}" icon="ui-icon-plus" process="pg" update="participants,pg,responsable"/>
			</p:panelGrid>
			
			<p:spacer height="3"/>
			<p:tabView id="participants" var="dmDto" value="#{enregistrerDemandeMHCIFormController.dossierMissionDtos}" >
				<p:tab title="#{dmDto.libelle}">
					
					<p:panelGrid columns="2" styleClass="panelGridNoBorder">

						<p:panelGrid id="panelIdentite" columns="4"  columnClasses="c1,c2,c1,c2"> 
					    	<h:outputText value="" rendered="#{dmDto.editable}"/><p:message for="typePersonne" rendered="#{dmDto.editable}"/>
					    	<h:outputText value="" rendered="#{dmDto.editable}"/><h:outputText value=""  rendered="#{dmDto.editable}" />
					    	
					    	<p:outputLabel for="typePersonne" value="Type d'agent " />
							<p:selectOneMenu id="typePersonne" value="#{dmDto.beneficiaire.type}" required="#{required}" requiredMessage="#{valueRequiredMessage}" 
								converter="#{objectConverter}" rendered="#{dmDto.editable}" binding="#{typePersonne}">
								<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
								<f:selectItems value="#{typeAgentEtats}" var="typeAgentEtat" itemLabel="#{typeAgentEtat.libelle}" />
								<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
							</p:selectOneMenu>
							<h:outputText value="#{dmDto.beneficiaire.type}" rendered="#{not dmDto.editable}"/>
					    	
					    	<h:outputText value="Matricule"  />
							<h:outputText value="#{dmDto.beneficiaire.matricule}" />
					    	
							<h:outputText value="" rendered="#{dmDto.editable}"/><p:message for="nom#{iid}" rendered="#{dmDto.editable}"/>
							<h:outputText value="" rendered="#{dmDto.editable}"/><p:message for="prenoms#{iid}" rendered="#{dmDto.editable}"/>
							
							<p:outputLabel for="nom#{iid}" value="Nom" />
						 	<p:inputText id="nom#{iid}" required="#{required}" value="#{dmDto.beneficiaire.nom}" requiredMessage="#{valueRequiredMessage}" rendered="#{dmDto.editable}">
						 		<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
						 	</p:inputText>
						 	<h:outputText value="#{dmDto.beneficiaire.nom}" rendered="#{not dmDto.editable}"/>
						 	
							<p:outputLabel for="prenoms#{iid}" value="Prenoms" />
							<p:inputText id="prenoms#{iid}" value="#{dmDto.beneficiaire.prenoms}" rendered="#{dmDto.editable}"/>
							<h:outputText value="#{dmDto.beneficiaire.prenoms}" rendered="#{not dmDto.editable}"/>
																		
						</p:panelGrid>
						
						<h:panelGroup>
							<p:commandButton value="Retirer" action="#{enregistrerDemandeMHCIFormController.supprimerParticipant(dmDto)}" icon="ui-icon-minus" immediate="true" process="@this" update="@form"/>
						</h:panelGroup>
					
					</p:panelGrid>
					
					<ui:include src="/dossier/include/inputPiecesJustificatives.xhtml">
						<ui:param name="uploader" value="#{dmDto.pieceJustificativeUploader}"/>
					</ui:include>
			
				</p:tab>
			</p:tabView>
		</p:fieldset>
	
	</ui:composition>
</body>
</html>
