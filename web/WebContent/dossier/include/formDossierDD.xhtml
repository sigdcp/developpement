<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<body>
	<ui:composition>
		<style>
			.c1{
				font-weight: bold;
				width: 200px;
			}
			.c2{
				
			}
			.c3{
				
			}
			.marieClass{}
		</style>
		
		<ui:param name="editable" value="#{editable==null?controller.editable:editable}" />
		<ui:param name="requiredEnabled" value="#{controller.requiredEnabled}" />
		
		<ui:include src="/dossier/include/inputCourrier.xhtml" />

		<p:fieldset legend="Agent" id="fieldsetAgent" toggleable="#{controller.courrierEditable}" collapsed="#{controller.courrierEditable}">	
			<ui:include src="/identification/include/outputAgentEtat.xhtml" >
				<ui:param name="agentEtat" value="#{controller.entity.beneficiaire}" />
				<ui:param name="columnCount" value="6" />
			</ui:include>  
			<p:spacer height="5" />
			<p:panelGrid columns="#{editable?6:4}" styleClass="panelGridNoBorder" columnClasses="#{editable?'c1,c2,c3,c1,c2,c3':'c1,c2,c1,c2'}">
				<p:outputLabel for="grade"  value="Grade" />
				<p:selectOneMenu id="grade" value="#{controller.entity.grade}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{editable==null or editable}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{grades}"/>
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>
				<h:outputText value="#{controller.entity.grade}" rendered="#{not editable}"/>
				<p:message for="grade" />				
				
				<p:outputLabel for="dateCessationService" value="Date de cessation de service" rendered="#{controller.showDateCessationService}" />
				<p:calendar id="dateCessationService" value="#{controller.entity.dateCessationService}" pattern="#{constantResources.datePattern}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" 
					rendered="#{controller.showDateCessationService and (editable==null or editable)}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:calendar>
				<h:outputText value="#{controller.entity.dateCessationService}" rendered="#{not editable and controller.showDateCessationService}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message for="dateCessationService" rendered="#{controller.showDateCessationService}"/>
	
				<p:outputLabel for="datePriseService" value="Date de prise de service" rendered="#{controller.showDatePriseService}" />
				<p:calendar id="datePriseService" value="#{controller.entity.datePriseService}" pattern="#{constantResources.datePattern}" validator="#{validationManager.validateDatePriseService}"
					required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" rendered="#{controller.showDatePriseService and (editable==null or editable)}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
					<f:attribute name="agentEtat" value="#{controller.entity.beneficiaire}"/>
				</p:calendar>
				<h:outputText value="#{controller.entity.datePriseService}" rendered="#{not editable and controller.showDatePriseService}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message for="datePriseService" rendered="#{controller.showDatePriseService}" />			
				
				<p:outputLabel for="dateMiseRetraite" value="Date de mise à la retraite" rendered="#{controller.showDateMiseRetraite}" />
				<p:calendar id="dateMiseRetraite" value="#{controller.entity.dateMiseRetraite}" pattern="#{constantResources.datePattern}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" 
					rendered="#{controller.showDateMiseRetraite and (editable==null or editable)}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />	
				</p:calendar>
				<h:outputText value="#{controller.entity.dateMiseRetraite}" rendered="#{not editable and controller.showDateMiseRetraite}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message for="dateMiseRetraite" rendered="#{controller.showDateMiseRetraite}"/>
									
			</p:panelGrid>
	
			<p:panelGrid id="panelGrid2" columns="#{editable?6:4}" styleClass="panelGridNoBorder" columnClasses="c1,c2,c3,c1,c2,c3">
				
				<p:outputLabel for="mariage" value="Situation Matrimoniale" rendered="#{editable}"/>			
				<p:selectOneRadio id="mariage" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" value="#{controller.marie}" rendered="#{editable}">
					<f:selectItem itemLabel="Marié(e)" itemValue="true" />
					<f:selectItem itemLabel="Célibataire" itemValue="false" />
					<p:ajax event="click" update="dt,panelGrid2" listener="#{enregistrerDemandeDDController.marieListener}" process="panelGrid2"/>
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneRadio>	
				<p:message for="mariage" rendered="#{editable}"/>				
				<h:outputText value="" rendered="#{editable}"/><h:outputText value="" rendered="#{editable}"/><h:outputText value="" rendered="#{editable}"/>
				
				<p:outputLabel id="dateMariageLabel" for="dateMariage" value="Marié(e) le" rendered="#{controller.marie}" styleClass="marieClass"/>
				<p:calendar id="dateMariage" value="#{controller.entity.dateMariage}" pattern="#{constantResources.datePattern}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" 
					rendered="#{editable and controller.marie}" styleClass="marieClass">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:calendar>
				<h:outputText value="#{controller.entity.dateMariage}" rendered="#{not editable and controller.marie}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message id="dateMariageMessage" for="dateMariage" rendered="#{editable and controller.marie}" styleClass="marieClass"/>
		
				<p:outputLabel for="lieuMariage" value="Marié(e) à la mairie de" rendered="#{controller.marie}"/>
				<p:selectOneMenu id="lieuMariage" value="#{controller.entity.mairieMariage}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" 
					rendered="#{editable and controller.marie}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{communes}" />
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>
				<h:outputText value="#{controller.entity.mairieMariage}" rendered="#{not editable and controller.marie}"/>
				<p:message for="lieuMariage" rendered="#{editable and controller.marie}"/>
				
				<p:outputLabel for="registMar" value="Numéro du régistre de mariage" rendered="#{controller.marie}"/>
				<p:inputText id="registMar" value="#{controller.entity.numeroRegistreMariage}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" rendered="#{editable and controller.marie}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:inputText>
				<h:outputText value="#{controller.entity.numeroRegistreMariage}" rendered="#{not editable and controller.marie}"/>
				<p:message for="registMar" rendered="#{editable and controller.marie}"/>	
				<h:outputText value="" rendered="#{editable and controller.marie}"/><h:outputText value="" rendered="#{editable and controller.marie}"/><h:outputText value="" rendered="#{editable and controller.marie}"/>	
				
				<p:outputLabel for="nbrEnfant" value="Nombre d'enfant"/>
				<p:inputText id="nbrEnfant" value="#{controller.nombreEnfant}" rendered="#{editable}" valueChangeListener="#{enregistrerDemandeDDController.nombreEnfantListener}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
					<p:ajax event="change" update="dt"  process="panelGrid2"/>
				</p:inputText>
				<h:outputText rendered="#{not editable}" value="#{controller.nombreEnfant}"/>
				<p:message for="nbrEnfant" rendered="#{editable}"/>					
			</p:panelGrid>					
		</p:fieldset>

		<p:spacer height="5" />
		
		<p:fieldset legend="Déplacement" toggleable="#{controller.courrierEditable}" collapsed="#{controller.courrierEditable}" >
			<h:panelGrid columns="6" columnClasses="c1,c2,c3,c1,c2,c3">
				
				<p:outputLabel for="serviceOrigine" value="Service d'origine:" rendered="#{controller.showServiceOrigine}" />
				<p:selectOneMenu id="serviceOrigine" value="#{controller.entity.serviceOrigine}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" 
				rendered="#{controller.showServiceOrigine and (editable==null or editable)}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{services}"/>
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>		
				<h:outputText value="#{controller.entity.serviceOrigine}" rendered="#{not editable and controller.showServiceOrigine}"/>
				<p:message for="serviceOrigine" rendered="#{controller.showServiceOrigine}" />
		        
		        <p:outputLabel for="serviceAcceuil" value="Service d'accueil:" rendered="#{controller.showServiceAcceuil}" />
				<p:selectOneMenu id="serviceAcceuil" value="#{controller.entity.service}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" 
				rendered="#{controller.showServiceAcceuil and (editable==null or editable)}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{services}"/>
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>          
				<h:outputText value="#{controller.entity.service}" rendered="#{not editable and controller.showServiceAcceuil}"/>
				 <p:message for="serviceAcceuil" rendered="#{controller.showServiceAcceuil}" />				
				
				<h:outputText rendered="#{not controller.showServiceOrigine or not controller.showServiceAcceuil}" />
				<h:outputText rendered="#{not controller.showServiceOrigine or not controller.showServiceAcceuil}" />
				<h:outputText rendered="#{not controller.showServiceOrigine or not controller.showServiceAcceuil}" />
				
				<p:outputLabel for="villeDepart"  value="Ville de départ:" />
				<p:selectOneMenu id="villeDepart" value="#{controller.entity.deplacement.localiteDepart}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{editable==null or editable}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{villes}"/>
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>
				<h:outputText value="#{controller.entity.deplacement.localiteDepart}" rendered="#{not editable}"/>
				 <p:message for="villeDepart" />
				
				<p:outputLabel for="villeArrivee" value="Ville d'arrivée:" />		
				<p:selectOneMenu id="villeArrivee" value="#{controller.entity.deplacement.localiteArrivee}" required="#{requiredEnabled}" requiredMessage="#{valueRequiredMessage}" converter="#{objectConverter}" rendered="#{editable==null or editable}">
					<f:selectItem noSelectionOption="" itemLabel="#{noSelectionOptionMessage}"/>
					<f:selectItems value="#{villes}"/>
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:selectOneMenu>	
				<h:outputText value="#{controller.entity.deplacement.localiteArrivee}" rendered="#{not editable}"/>
				<p:message for="villeArrivee" />
				
				<p:outputLabel for="dateDepart" value="Date départ" />
				<p:calendar id="dateDepart" value="#{controller.entity.deplacement.dateDepart}" required="#{requiredEnabled}" pattern="#{constantResources.datePattern}" requiredMessage="#{valueRequiredMessage}" rendered="#{editable==null or editable}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:calendar>
				<h:outputText value="#{controller.entity.deplacement.dateDepart}" rendered="#{not editable}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message for="dateDepart" />
				 
				<p:outputLabel for="dateArrivee" value="Date arrivée" />
				<p:calendar id="dateArrivee" value="#{controller.entity.deplacement.dateArrivee}" required="#{requiredEnabled}" pattern="#{constantResources.datePattern}" requiredMessage="#{valueRequiredMessage}" rendered="#{editable==null or editable}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:calendar>
				<h:outputText value="#{controller.entity.deplacement.dateArrivee}" rendered="#{not editable}"><f:convertDateTime pattern="#{constantResources.datePattern}"/></h:outputText>
				<p:message for="dateArrivee" />
			 
				<p:outputLabel for="poidsBagaggeC" value="Poids des bagages (en KG) constaté" />
				<p:inputText id="poidsBagaggeC" value="#{controller.entity.poidsBagageConstate}" requiredMessage="#{valueRequiredMessage}" rendered="#{editable==null or editable}">
					<f:validateBean  validationGroups="#{clientValidationGroupClass}" />
				</p:inputText>
				<h:outputText value="#{controller.entity.poidsBagageConstate}" rendered="#{not editable}"/>	
				<p:message for="poidsBagaggeC" />
				
			</h:panelGrid>
		</p:fieldset>
		
		<p:spacer height="5"/>
		
		<ui:include src="/dossier/include/inputPiecesJustificatives.xhtml"/>
		
	</ui:composition>
</body>
</html>
